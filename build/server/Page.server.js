"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t=require("vue"),u=require("ssr-common-utils"),k=require("pinia"),ce=require("ssr-serialize-javascript"),le=require("@vue/server-renderer"),n=require("vue/server-renderer"),V=require("vue-router"),je=require("vuex"),ke=require("ssr-deepclone"),H=require("swiper/vue"),K=require("swiper"),g=(r,s)=>{const e=r.__vccOpts||r;for(const[i,a]of s)e[i]=a;return e};const U={};function Ne(r,s,e,i){s(`<html${n.ssrRenderAttrs(i)}><head><meta charSet="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme-color" content="#000000"><title>Serverless Side Render for Vue3</title>`),n.ssrRenderSlot(r.$slots,"remInitial",{},null,s,e),n.ssrRenderSlot(r.$slots,"injectHeader",{},null,s,e),s("</head><body>"),n.ssrRenderSlot(r.$slots,"content",{},null,s,e),s("</body></html>")}const ue=U.setup;U.setup=(r,s)=>{const e=t.useSSRContext();return(e.modules||(e.modules=new Set)).add("web/components/layout/index.vue"),ue?ue(r,s):void 0};var Fe=g(U,[["ssrRender",Ne]]);const J=t.defineComponent({__name:"App",__ssrInlineRender:!0,props:{ssrApp:{},asyncData:{}},setup(r){return(s,e,i,a)=>{const o=t.resolveComponent("router-view");e(n.ssrRenderComponent(o,t.mergeProps({asyncData:s.asyncData},a),null,i))}}}),pe=J.setup;J.setup=(r,s)=>{const e=t.useSSRContext();return(e.modules||(e.modules=new Set)).add("web/components/layout/App.vue"),pe?pe(r,s):void 0};var Oe=async({store:r,router:s},e)=>{};const Be=[{path:"/detail/:id",component:function(){return Promise.resolve().then(function(){return Qe})},webpackChunkName:"detail-id",fetch:()=>Promise.resolve().then(function(){return tt}),name:"detail-id"},{path:"/",component:function(){return Promise.resolve().then(function(){return nt})},webpackChunkName:"index",fetch:()=>Promise.resolve().then(function(){return ot}),name:"index"}];var Me=Object.freeze(Object.defineProperty({__proto__:null,FeRoutes:Be,Layout:Fe,App:J,layoutFetch:Oe},Symbol.toStringTag,{value:"Module"})),Le=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));const W=u.combineRoutes(Me,Le),{store:Ve,FeRoutes:qe}=W;function ze(r={}){var s;return s=r.base,V.createRouter({history:V.createMemoryHistory(),routes:qe})}function Xe(){return je.createStore(ke.deepClone(Ve))}const Ee=r=>r.map(s=>t.h("style",{innerHTML:s})),ve=r=>r.map(s=>{var e;return t.h((e=s.tagName)!==null&&e!==void 0?e:"script",Object.assign({},s.describe,{innerHTML:s.content}))}),{FeRoutes:He,App:Ke,layoutFetch:_e,Layout:Ue}=W,me=u.getStaticConfig(),Je=async(r,s)=>{var e;const{mode:i,customeHeadScript:a,customeFooterScript:o,parallelFetch:d,prefix:p,isVite:l,isDev:_,clientPrefix:y,stream:v,fePort:ne,https:N,rootId:ae,bigpipe:R,hashRouter:Ie}=s,$=Xe(),F=ze(),h=k.createPinia(),Ae=(e=r.request.path)!==null&&e!==void 0?e:r.request.url,[q,De]=[u.normalizePath(Ae,p),u.normalizePath(r.request.url,p)],oe=u.findRoute(He,q);u.checkRoute({routeItem:oe,path:q});const Te=({combineAysncData:w,state:x,layoutFetchData:I,asyncData:A,manifest:z,isCsr:C,jsInject:m,cssInject:O,inlineCssOrder:X,rootId:D})=>{const B=t.createSSRApp({render:function(){const E={manifest:_?z:"",rootId:D,fePort:_?ne:"",https:_?N:""},b=u.splitPageInfo({"window.__USE_SSR__":!C,"window.__INITIAL_DATA__":C?{}:ce.serialize(x),"window.__INITIAL_PINIA_DATA__":C?{}:ce.serialize(h.state.value),"window.__USE_VITE__":l,"window.prefix":`"${p}"`,"window.clientPrefix":`"${y!=null?y:""}"`,"window.ssrDevInfo":JSON.stringify(E),"window.hashRouter":Boolean(Ie)}),S=t.h("script",{innerHTML:b}),T=R?"":t.h(Ke,{ctx:r,config:s,asyncData:A,fetchData:w,reactiveFetchData:{value:w},ssrApp:B}),P=ve(u.getUserScriptVue({script:a,ctx:r,position:"header",staticConfig:me})).concat(Ee(X)),M=ve(u.getUserScriptVue({script:o,ctx:r,position:"footer",staticConfig:me}));return t.h(Ue,{ctx:r,config:s,asyncData:A,fetchData:I,reactiveFetchData:{value:I}},{remInitial:()=>t.h("script",{innerHTML:u.remInitial}),customeHeadScript:()=>P,customeFooterScript:()=>M,children:()=>T,initialData:()=>S,cssInject:()=>O,jsInject:()=>m,injectHeader:()=>[P,O],content:()=>[t.h("div",{id:D.replace("#","")},t.renderSlot(this.$slots,"default",{},()=>[T])),S,M,m]})}});return B},Pe=async()=>{var w,x;const{fetch:I,webpackChunkName:A}=oe,z=await u.getAsyncCssChunk(r,A,s),C=await u.getAsyncJsChunk(r,A,s),m=await u.getManifest(s),[O,X]=await u.getInlineCss({dynamicCssOrder:z,manifest:m,config:s,type:"vue3"}),D=!!(i==="csr"||((w=r.request.query)===null||w===void 0?void 0:w.csr)),B=(l&&_?[t.h("script",{type:"module",src:"/@vite/client"})]:X.map(c=>m[c]).filter(Boolean).map(c=>t.h("link",{rel:"stylesheet",href:c}))).concat(l&&_?[]:C.map(c=>m[c]).filter(Boolean).map(c=>t.h("link",{href:c,as:"script",rel:l?"modulepreload":"preload"}))),E=l&&_?[t.h("script",{type:"module",src:"/node_modules/ssr-plugin-vue3/esm/entry/client-entry.js"})]:C.map(c=>m[c]).filter(Boolean).map(c=>t.h("script",{src:c,type:l?"module":"text/javascript"}));let[b,S]=[{},{}];if(!D&&!R){F.push(De),await F.isReady();const c=I?(await I()).default:null,{value:L}=F.currentRoute,ie=_e?_e({store:$,router:L,ctx:r,pinia:h},r):Promise.resolve({}),de=c?c({store:$,router:L,ctx:r,pinia:h},r):Promise.resolve({});[b,S]=d?await Promise.all([ie,de]):[await ie,await de]}else u.logGreen(`Current path ${q} use csr render mode`);const T=Object.assign({},b!=null?b:{},S!=null?S:{}),P={value:T},M=Object.assign({},(x=$.state)!==null&&x!==void 0?x:{},P.value);let j=null;const f=Te({state:M,asyncData:P,layoutFetchData:b,combineAysncData:T,manifest:m,jsInject:E,cssInject:B,isCsr:D,inlineCssOrder:O,rootId:ae});return f.config.errorHandler||(f.config.errorHandler=c=>{j=c}),f.use(F),f.use($),f.use(h),await u.appLocalStoreageWrapper.run({app:f},async()=>{if(v){const c=le.renderToNodeStream(f);if(j)throw new Error(j);return c}else{const c={},L=await le.renderToString(f,c);if(j)throw new Error(j);return{html:L,teleportsContext:c}}})};return await u.localStorageWrapper.run({pinia:h,store:$,ctx:r},Pe)};const Z=t.defineComponent({__name:"index",__ssrInlineRender:!0,props:{data:{}},setup(r){const s=r,e=t.toRefs(s.data[0].data),i=t.ref(!1);return(a,o,d,p)=>{o(`<div${n.ssrRenderAttrs(p)} data-v-dba9f80c>`),i.value?o('<div data-v-dba9f80c><video src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4" controls autoPlay class="video" data-v-dba9f80c> your browser does not support the video tag </video></div>'):o(`<div class="playerContainer" style="${n.ssrRenderStyle({background:`url(${t.unref(e).img}) 0 0 /cover`})}" data-v-dba9f80c><div class="title" data-v-dba9f80c>${n.ssrInterpolate(t.unref(e).title)}</div><img class="ico" src="https://gw.alicdn.com/tfs/TB1eA6FEW61gK0jSZFlXXXDKFXa-135-135.png" data-v-dba9f80c><div class="layer" data-v-dba9f80c></div></div>`),o("</div>")}}}),fe=Z.setup;Z.setup=(r,s)=>{const e=t.useSSRContext();return(e.modules||(e.modules=new Set)).add("web/components/player/index.vue"),fe?fe(r,s):void 0};var We=g(Z,[["__scopeId","data-v-dba9f80c"]]);const G=t.defineComponent({__name:"index",__ssrInlineRender:!0,props:{data:{}},setup(r){const s=r,e=t.toRefs(s.data[0].data);return(i,a,o,d)=>{a(`<div${n.ssrRenderAttrs(t.mergeProps({class:"brief-info"},d))} data-v-715895c8><div class="brief-title" data-v-715895c8><span class="[&#39;icon-GOLDEN&#39;]" data-v-715895c8>${n.ssrInterpolate(t.unref(e).mark.value.data.text)}</span><h1 data-v-715895c8>${n.ssrInterpolate(t.unref(e).showName)}</h1></div><div class="brief-score" data-v-715895c8><!--[-->`),n.ssrRenderList(t.unref(e).subTitleList.value,(p,l)=>{a(`<span class="${n.ssrRenderClass(p.subtitleType==="PLAY_VV"?"hotVv":"")}" data-v-715895c8>`),p.subtitleType==="PLAY_VV"?a(`<img${n.ssrRenderAttr("src",t.unref(e).heatIcon.value)} alt="" data-v-715895c8>`):a("<!---->"),l>0?a('<span class="divide" data-v-715895c8>/</span>'):a("<!---->"),a(`<span data-v-715895c8>${n.ssrInterpolate(p.subtitle)}</span></span>`)}),a("<!--]--></div></div>")}}}),be=G.setup;G.setup=(r,s)=>{const e=t.useSSRContext();return(e.modules||(e.modules=new Set)).add("web/components/brief/index.vue"),be?be(r,s):void 0};var Ze=g(G,[["__scopeId","data-v-715895c8"]]);const Y=t.defineComponent({__name:"index",__ssrInlineRender:!0,props:{data:{}},setup(r){return(s,e,i,a)=>{e(`<div${n.ssrRenderAttrs(a)} data-v-a0a44ca2><div class="title" data-v-a0a44ca2> \u4E3A\u4F60\u63A8\u8350 </div><div class="reContainer" data-v-a0a44ca2><!--[-->`),n.ssrRenderList(s.data,o=>{e(`<div class="reContent" data-v-a0a44ca2><img${n.ssrRenderAttr("src",o.data.img)} data-v-a0a44ca2><div class="vTitle" data-v-a0a44ca2>${n.ssrInterpolate(o.data.title)}</div><div class="subTitle" data-v-a0a44ca2>${n.ssrInterpolate(o.data.subtitle)}</div></div>`)}),e("<!--]--></div></div>")}}}),Se=Y.setup;Y.setup=(r,s)=>{const e=t.useSSRContext();return(e.modules||(e.modules=new Set)).add("web/components/recommend/index.vue"),Se?Se(r,s):void 0};var Ge=g(Y,[["__scopeId","data-v-a0a44ca2"]]);const $e=k.defineStore("indexStore",{state:()=>({data:{}}),actions:{setData(r){this.data=r.data}}}),he=k.defineStore("detailStore",{state:()=>({data:{}}),actions:{setData(r){this.data=r.data}}}),Ye=k.defineStore("searchStore",{state:()=>({searchText:""}),actions:{setData(r){this.searchText=r.text}}});const Q=t.defineComponent({__name:"index",__ssrInlineRender:!0,setup(r){const s=Ye(),{searchText:e}=k.storeToRefs(s);return(i,a,o,d)=>{a(`<div${n.ssrRenderAttrs(t.mergeProps({class:"searchContainer"},d))} data-v-4e3abb15><input${n.ssrRenderAttr("value",t.unref(e))} type="text" class="input" placeholder="\u8BE5\u641C\u7D22\u6846\u5185\u5BB9\u4F1A\u5728\u6240\u6709\u9875\u9762\u5171\u4EAB" data-v-4e3abb15><img src="https://img.alicdn.com/tfs/TB15zSoX21TBuNjy0FjXXajyXXa-48-48.png" alt="" class="searchImg" data-v-4e3abb15></div>`)}}}),ge=Q.setup;Q.setup=(r,s)=>{const e=t.useSSRContext();return(e.modules||(e.modules=new Set)).add("web/components/search/index.vue"),ge?ge(r,s):void 0};var xe=g(Q,[["__scopeId","data-v-4e3abb15"]]);const ee=t.defineComponent({__name:"render$id",__ssrInlineRender:!0,setup(r){const e=he().data;return(i,a,o,d)=>{a(`<div${n.ssrRenderAttrs(d)}>`),a(n.ssrRenderComponent(xe,null,null,o)),t.unref(e)?(a("<!--[-->"),a(n.ssrRenderComponent(We,{data:t.unref(e)[0].dataNode},null,o)),a(n.ssrRenderComponent(Ze,{data:t.unref(e)[1].dataNode},null,o)),a(n.ssrRenderComponent(Ge,{data:t.unref(e)[2].dataNode},null,o)),a("<!--]-->")):a('<img src="https://gw.alicdn.com/tfs/TB1v.zIE7T2gK0jSZPcXXcKkpXa-128-128.gif" class="loading">'),a("</div>")}}}),ye=ee.setup;ee.setup=(r,s)=>{const e=t.useSSRContext();return(e.modules||(e.modules=new Set)).add("web/pages/detail/render$id.vue"),ye?ye(r,s):void 0};var Qe=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"})),et=async({store:r,router:s,pinia:e,ctx:i})=>{var d;const a=he(e),o=await((d=i==null?void 0:i.apiDeatilservice)==null?void 0:d.index(i.request.params.id));a.setData(o)},tt=Object.freeze(Object.defineProperty({__proto__:null,default:et},Symbol.toStringTag,{value:"Module"}));const te=t.defineComponent({__name:"index",__ssrInlineRender:!0,props:{data:{}},setup(r){const s=V.useRouter();K.Swiper.use([K.Autoplay,K.Pagination]);const e=()=>{s.push("/detail/cbba934b14f747049187")};return(i,a,o,d)=>{a(`<div${n.ssrRenderAttrs(t.mergeProps({class:"swiperContainer"},d))} data-v-45fb15f8>`),a(n.ssrRenderComponent(t.unref(H.Swiper),{ref:"mySwiper"},{pagination:t.withCtx((p,l,_,y)=>{if(!l)return[]}),default:t.withCtx((p,l,_,y)=>{if(l)l("<!--[-->"),n.ssrRenderList(i.data[0].itemMap,v=>{l(n.ssrRenderComponent(t.unref(H.SwiperSlide),{key:v.img,class:"sliderContainer",onClick:e},{default:t.withCtx((ne,N,ae,R)=>{if(N)N(`<img${n.ssrRenderAttr("src",v.img)} class="carouselImg" data-v-45fb15f8${R}><div class="sliderDescContainer" data-v-45fb15f8${R}><span class="sliderTitle" data-v-45fb15f8${R}>${n.ssrInterpolate(v.title)}</span></div>`);else return[t.createVNode("img",{src:v.img,class:"carouselImg"},null,8,["src"]),t.createVNode("div",{class:"sliderDescContainer"},[t.createVNode("span",{class:"sliderTitle"},t.toDisplayString(v.title),1)])]}),_:2},_,y))}),l("<!--]-->");else return[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(i.data[0].itemMap,v=>(t.openBlock(),t.createBlock(t.unref(H.SwiperSlide),{key:v.img,class:"sliderContainer",onClick:e},{default:t.withCtx(()=>[t.createVNode("img",{src:v.img,class:"carouselImg"},null,8,["src"]),t.createVNode("div",{class:"sliderDescContainer"},[t.createVNode("span",{class:"sliderTitle"},t.toDisplayString(v.title),1)])]),_:2},1024))),128))]}),_:1},o)),a("</div>")}}}),Re=te.setup;te.setup=(r,s)=>{const e=t.useSSRContext();return(e.modules||(e.modules=new Set)).add("web/components/slider/index.vue"),Re?Re(r,s):void 0};var rt=g(te,[["__scopeId","data-v-45fb15f8"]]);const re=t.defineComponent({__name:"index",__ssrInlineRender:!0,props:{data:{}},setup(r){return V.useRouter(),(s,e,i,a)=>{e(`<div${n.ssrRenderAttrs(t.mergeProps({class:"pbbContainer"},a))} data-v-b3bd6c22><!--[-->`),n.ssrRenderList(s.data[0].itemMap,o=>{e(`<div class="pbbItemContainer" data-v-b3bd6c22><div class="pbbDescContainer" data-v-b3bd6c22><div class="defaultItemBg" style="${n.ssrRenderStyle({background:`url(${o.img}) 0 0 /cover`})}" data-v-b3bd6c22></div><div class="pName pbbName" data-v-b3bd6c22>${n.ssrInterpolate(o.title)}</div><div class="pDesc pbbName" data-v-b3bd6c22>${n.ssrInterpolate(o.subtitle)}</div></div></div>`)}),e("<!--]--></div>")}}}),we=re.setup;re.setup=(r,s)=>{const e=t.useSSRContext();return(e.modules||(e.modules=new Set)).add("web/components/rectangle/index.vue"),we?we(r,s):void 0};var st=g(re,[["__scopeId","data-v-b3bd6c22"]]);const se=t.defineComponent({__name:"render",__ssrInlineRender:!0,setup(r){const e=$e().data,a=[...t.ref([1,2,3]).value];return t.onMounted(()=>{console.log("arr2",a)}),(o,d,p,l)=>{d(`<div${n.ssrRenderAttrs(l)}>`),d(n.ssrRenderComponent(xe,null,null,p)),t.unref(e)?(d("<!--[-->"),d(n.ssrRenderComponent(rt,{data:t.unref(e)[0].components},null,p)),d(n.ssrRenderComponent(st,{data:t.unref(e)[1].components},null,p)),d("<!--]-->")):d('<img src="https://gw.alicdn.com/tfs/TB1v.zIE7T2gK0jSZPcXXcKkpXa-128-128.gif" class="loading">'),d("</div>")}}}),Ce=se.setup;se.setup=(r,s)=>{const e=t.useSSRContext();return(e.modules||(e.modules=new Set)).add("web/pages/index/render.vue"),Ce?Ce(r,s):void 0};var nt=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"})),at=async({store:r,router:s,pinia:e,ctx:i})=>{var d;const a=$e(e),o=await((d=i==null?void 0:i.apiService)==null?void 0:d.index());a.setData(o)},ot=Object.freeze(Object.defineProperty({__proto__:null,default:at},Symbol.toStringTag,{value:"Module"}));exports.Routes=W;exports.serverRender=Je;
