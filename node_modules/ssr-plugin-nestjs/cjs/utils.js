"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.morethan10 = exports.getNormalizeArgv = exports.getNestjsVersion = void 0;
const ssr_common_utils_1 = require("ssr-common-utils");
const path_1 = require("path");
const semver_1 = require("semver");
const getNormalizeArgv = (argv, options) => {
    const { singleDash, doubleDash } = options;
    let normalizeArgv = '';
    for (const key in argv) {
        const val = argv[key];
        if (singleDash === null || singleDash === void 0 ? void 0 : singleDash.includes(key)) {
            normalizeArgv += `-${key} ${typeof val === 'boolean' ? '' : val}`;
        }
        else if (doubleDash === null || doubleDash === void 0 ? void 0 : doubleDash.includes(key)) {
            normalizeArgv += `--${key} ${typeof val === 'boolean' ? '' : val}`;
        }
        normalizeArgv += ' ';
    }
    if (argv.showArgs) {
        console.log(normalizeArgv);
    }
    return normalizeArgv;
};
exports.getNormalizeArgv = getNormalizeArgv;
const getNestjsVersion = () => {
    var _a;
    const cwd = (0, ssr_common_utils_1.getCwd)();
    const p = require((0, path_1.resolve)(cwd, './package.json'));
    const v = (_a = p['devDependencies']) === null || _a === void 0 ? void 0 : _a['@nestjs/cli'];
    return v;
};
exports.getNestjsVersion = getNestjsVersion;
const morethan10 = () => { var _a, _b; return ((_b = (_a = (0, semver_1.coerce)((0, exports.getNestjsVersion)())) === null || _a === void 0 ? void 0 : _a.major) !== null && _b !== void 0 ? _b : 8) >= 10; };
exports.morethan10 = morethan10;
//# sourceMappingURL=utils.js.map