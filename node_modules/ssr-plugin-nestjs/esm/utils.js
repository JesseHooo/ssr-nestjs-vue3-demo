import { getCwd } from 'ssr-common-utils';
import { resolve } from 'path';
import { coerce } from 'semver';
const getNormalizeArgv = (argv, options) => {
    const { singleDash, doubleDash } = options;
    let normalizeArgv = '';
    for (const key in argv) {
        const val = argv[key];
        if (singleDash === null || singleDash === void 0 ? void 0 : singleDash.includes(key)) {
            normalizeArgv += `-${key} ${typeof val === 'boolean' ? '' : val}`;
        }
        else if (doubleDash === null || doubleDash === void 0 ? void 0 : doubleDash.includes(key)) {
            normalizeArgv += `--${key} ${typeof val === 'boolean' ? '' : val}`;
        }
        normalizeArgv += ' ';
    }
    if (argv.showArgs) {
        console.log(normalizeArgv);
    }
    return normalizeArgv;
};
export const getNestjsVersion = () => {
    var _a;
    const cwd = getCwd();
    const p = require(resolve(cwd, './package.json'));
    const v = (_a = p['devDependencies']) === null || _a === void 0 ? void 0 : _a['@nestjs/cli'];
    return v;
};
const morethan10 = () => { var _a, _b; return ((_b = (_a = coerce(getNestjsVersion())) === null || _a === void 0 ? void 0 : _a.major) !== null && _b !== void 0 ? _b : 8) >= 10; };
export { getNormalizeArgv, morethan10 };
//# sourceMappingURL=utils.js.map